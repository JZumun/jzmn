var jzmn=function(n){"use strict"
if("undefined"!=typeof n)throw new TypeError("'jzmn' already defined.")
var e=Array.prototype,r=function(n){return void 0===n||null===n?[]:Array.isArray(n)?n:n.length?e.slice.call(n):[n]},t=function(n,e){var a=e||[]
return r(n).forEach(function(n,e){Array.isArray(n)?t(n,a):a.push(n)}),a},a=function(n,e){var r=Object.create(a.fn)
return r.els="function"==typeof e?e(n):u(n),r.el=r.els[0],r}
a.fn={}
var u=null,i={}
a.setParser=function(n,e){e&&(i[n]=e),u=i[n]},a.setParser("default",r),a.extendFn=function(n,e){var r=Object.assign({input:"individual",output:"wrapped"},e)
return Object.keys(n).forEach(function(e){a.fn[e]=function(){var u,i=arguments
switch(r.input){case"array":u=t(n[e].bind(null,this.els).apply(null,i)||this.els)
break
case"single":u=t(n[e].bind(null,this.el).apply(null,i)||this.els)
break
case"individual":default:u=t(this.els.map(function(r){var t=n[e].bind(null,r).apply(null,i)
return void 0!==t?t:r}))}return{wrapped:a(u),bare:u.length>1?u:u[0],self:a(this.els),"bare || self":void 0===u?a(this.els):u.length>1?u:u[0]}[r.output]}}),n},a.extendFactory=function(n,e,r){var t=n?a[n]||(a[n]={}):a
return Object.keys(a.extendFn(e,r)).forEach(function(n,r){t[n]=e[n]}),a}
var l=function(n){return function(r,t,a){if(t){if(r.length||0===r.length)return e[n].call(r,t,a)
var u={}
return Object.keys(r)[n](function(n,e){var i=t.call(a||r,r[n],n,r)
return i&&(u[n]=i),i}),u}}}
return a.extendFn({at:function(n,e){return n[e]||[]}},{input:"array"}),a.extendFactory("util",{flatten:t,arrify:r,each:l("forEach"),map:l("map"),filter:l("filter"),reduce:function(n,r,t){return n.length||0===n.length?e.reduce.call(n,r,t):Object.keys(n).reduce(function(e,a,u){if(!u){if(!t)return n[a]
e=t}return r.call(n,e,n[a],a)},"")}},{input:"array"}),a}(jzmn)
