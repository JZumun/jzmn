var jzmn=function(n){"use strict"
if("undefined"!=typeof n)throw new TypeError("'jzmn' already defined.")
var e=Array.prototype,t=function(n){return void 0===n||null===n?[]:n.length?e.slice.call(n):[n]},r=function(n,e){var u=e||[]
return t(n).forEach(function(n,e){Array.isArray(n)?r(n,u):u.push(n)}),u},u=function(n,e){var t=Object.create(u.fn)
return t.els="function"==typeof e?e(n):a(n),t.el=t.els[0],t}
u.fn={}
var a=null,i={}
u.setParser=function(n,e){e&&(i[n]=e),a=i[n]},u.setParser("default",t),u.extendFn=function(n,e){var t=Object.assign({input:"individual",output:"wrapped"},e)
return Object.keys(n).forEach(function(e){u.fn[e]=function(){var a,i=arguments
switch(t.input){case"array":a=r(n[e].bind(null,this.els).apply(null,i))
break
case"single":a=r(n[e].bind(null,this.el).apply(null,i))
break
case"individual":default:a=r(this.els.map(function(t){return n[e].bind(null,t).apply(null,i)}))}return{wrapped:u(a||this.els),bare:a.length>1?a:a[0],self:u(this.els),"bare || self":a.every(function(n){return void 0===n})?u(this.els):a.length>1?a:a[0]}[t.output]}}),n},u.extendFactory=function(n,e,t){var r=n?u[n]||(u[n]={}):u
return Object.keys(u.extendFn(e,t)).forEach(function(n,t){r[n]=e[n]}),u}
var l=function(n){return function(t,r,u){if(r){if(t.length||0===t.length)return e[n].call(t,r,u)
var a={}
return Object.keys(t)[n](function(n,e){var i=r.call(u||t,t[n],n,t)
return i&&(a[n]=i),i}),a}}}
return u.extendFn({at:function(n,e){return n[e]||[]}},{input:"array"}),u.extendFactory("util",{flatten:r,arrify:t,each:l("forEach"),map:l("map"),filter:l("filter"),reduce:function(n,t,r){return n.length||0===n.length?e.reduce.call(n,t,r):Object.keys(n).reduce(function(e,u,a){if(!a){if(!r)return n[u]
e=r}return t.call(n,e,n[u],u)},"")}},{input:"array"}),u}(jzmn)
